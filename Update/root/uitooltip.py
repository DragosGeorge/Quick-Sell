Search if shop.IsOpen(): in function def SetInventoryItem(self,

Change:

		if shop.IsOpen() or (self.interface and self.interface.wndQuickSell and self.interface.wndQuickSell.IsShow()):
